var JsSearch;!function(t){}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(){}return t.prototype.expandToken=function(t){for(var r=[],e=0,n=t.length;n>e;++e)for(var i="",a=e;n>a;++a)i+=t.charAt(a),r.push(i);return r},t}();t.AllSubstringsIndexStrategy=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(){}return t.prototype.expandToken=function(t){return t?[t]:[]},t}();t.ExactWordIndexStrategy=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(){}return t.prototype.expandToken=function(t){for(var r=[],e="",n=0,i=t.length;i>n;++n)e+=t.charAt(n),r.push(e);return r},t}();t.PrefixIndexStrategy=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(t,r){this.decoratedIndexStrategy_=r,this.stemmingFunction_=t}return t.prototype.expandToken=function(t){return this.decoratedIndexStrategy_.expandToken(this.stemmingFunction_(t))},t}();t.StemmingIndexStrategyDecorator=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(t){this.decoratedIndexStrategy_=t,this.stopWordsMap_={},this.stopWordsMap_.a=!0,this.stopWordsMap_.about=!0,this.stopWordsMap_.an=!0,this.stopWordsMap_.are=!0,this.stopWordsMap_.as=!0,this.stopWordsMap_.at=!0,this.stopWordsMap_.be=!0,this.stopWordsMap_["by "]=!0,this.stopWordsMap_["for"]=!0,this.stopWordsMap_.from=!0,this.stopWordsMap_.how=!0,this.stopWordsMap_.i=!0,this.stopWordsMap_["in"]=!0,this.stopWordsMap_.is=!0,this.stopWordsMap_.it=!0,this.stopWordsMap_.of=!0,this.stopWordsMap_.on=!0,this.stopWordsMap_.or=!0,this.stopWordsMap_.that=!0,this.stopWordsMap_.the=!0,this.stopWordsMap_["this"]=!0,this.stopWordsMap_.to=!0,this.stopWordsMap_.was=!0,this.stopWordsMap_.what=!0,this.stopWordsMap_.when=!0,this.stopWordsMap_.where=!0,this.stopWordsMap_.who=!0,this.stopWordsMap_.will=!0,this.stopWordsMap_["with"]=!0}return t.prototype.expandToken=function(t){return this.stopWordsMap_[t]?[]:this.decoratedIndexStrategy_.expandToken(t)},t}();t.StopWordsIndexStrategyDecorator=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){}(JsSearch||(JsSearch={}));var JsSearch;!function(t){}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(){}return t.prototype.prune=function(t){for(var r={},e=0,n=t.length;n>e;e++){var i=t[e];if(0===e)for(var a in i)r[a]=i[a];else for(var a in r)i[a]||delete r[a]}return r},t}();t.AllWordsMustMatchPruningStrategy=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(){}return t.prototype.prune=function(t){for(var r={},e=0,n=t.length;n>e;e++){var i=t[e];for(var a in i)r[a]=i[a]}return r},t}();t.AnyWordsThatMatchPruningStrategy=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(){}return t.prototype.sanitize=function(t){return t?t.trim():""},t}();t.CaseSensitiveSanitizer=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(){}return t.prototype.sanitize=function(t){return t?t.toLocaleLowerCase().trim():""},t}();t.LowerCaseSanitizer=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){}(JsSearch||(JsSearch={}));var JsSearch;!function(t){}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function t(){}return t.prototype.tokenize=function(t){return t.split(/[^a-zA-Z0-9\-']+/).filter(function(t){return!!t})},t}();t.SimpleTokenizer=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function r(r){this.uidFieldName_=r,this.indexStrategy_=new t.PrefixIndexStrategy,this.pruningStrategy=new t.AllWordsMustMatchPruningStrategy,this.sanitizer_=new t.LowerCaseSanitizer,this.tokenizer_=new t.SimpleTokenizer,this.documents_=[],this.searchableFieldsMap_={},this.searchIndex_={}}return Object.defineProperty(r.prototype,"indexStrategy",{get:function(){return this.indexStrategy_},set:function(t){if(this.initialized_)throw Error("IIndexStrategy cannot be set after initialization");this.indexStrategy_=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pruningStrategy",{get:function(){return this.pruningStrategy_},set:function(t){this.pruningStrategy_=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sanitizer",{get:function(){return this.sanitizer_},set:function(t){if(this.initialized_)throw Error("ISanitizer cannot be set after initialization");this.sanitizer_=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tokenizer",{get:function(){return this.tokenizer_},set:function(t){if(this.initialized_)throw Error("ITokenizer cannot be set after initialization");this.tokenizer_=t},enumerable:!0,configurable:!0}),r.prototype.addDocument=function(t){this.addDocuments([t])},r.prototype.addDocuments=function(t){this.documents_.push.apply(this.documents_,t),this.indexDocuments_(t,Object.keys(this.searchableFieldsMap_))},r.prototype.addIndex=function(t){this.searchableFieldsMap_[t]=!0,this.indexDocuments_(this.documents_,[t])},r.prototype.search=function(t){for(var r=this.tokenizer_.tokenize(this.sanitizer_.sanitize(t)),e=[],n=0,i=r.length;i>n;n++){var a=r[n];e.push(this.searchIndex_[a]||{})}var s=this.pruningStrategy_.prune(e),o=[];for(var h in s)o.push(s[h]);return o},r.prototype.indexDocuments_=function(t,r){this.initialized_=!0;for(var e=0,n=t.length;n>e;e++)for(var i=t[e],a=i[this.uidFieldName_],s=0,o=r.length;o>s;s++){var h=r[s],c=i[h];if("string"==typeof c)for(var p=this.tokenizer_.tokenize(this.sanitizer_.sanitize(c)),u=0,d=p.length;d>u;u++)for(var f=p[u],S=this.indexStrategy_.expandToken(f),_=0,g=S.length;g>_;_++){var y=S[_];this.searchIndex_[y]||(this.searchIndex_[y]={}),this.searchIndex_[y][a]=i}}},r}();t.Search=r}(JsSearch||(JsSearch={}));var JsSearch;!function(t){var r=function(){function r(r,e,n){this.indexStrategy_=r||new t.PrefixIndexStrategy,this.sanitizer_=e||new t.LowerCaseSanitizer,this.wrapperTagName_=n||"mark"}return r.prototype.highlight=function(t,r){for(var e=this.wrapText_("").length,n={},i=0,a=r.length;a>i;i++)for(var s=this.sanitizer_.sanitize(r[i]),o=this.indexStrategy_.expandToken(s),h=0,c=o.length;c>h;h++){var p=o[h];n[p]?n[p].push(s):n[p]=[s]}for(var u="",d="",f=0,i=0,S=t.length;S>i;i++){var _=t.charAt(i);" "===_?(u="",d="",f=i+1):(u+=_,d+=this.sanitizer_.sanitize(_)),n[d]&&n[d].indexOf(d)>=0&&(u=this.wrapText_(u),t=t.substring(0,f)+u+t.substring(i+1),i+=e,S+=e)}return t},r.prototype.wrapText_=function(t){return"<"+this.wrapperTagName_+">"+t+"</"+this.wrapperTagName_+">"},r}();t.TokenHighlighter=r}(JsSearch||(JsSearch={}));