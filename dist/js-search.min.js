var JsSearch;!function(e){}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],n=0,r=e.length;r>n;++n)for(var i="",a=n;r>a;++a)i+=e.charAt(a),t.push(i);return t},e}();e.AllSubstringsIndexStrategy=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(){}return e.prototype.expandToken=function(e){return e?[e]:[]},e}();e.ExactWordIndexStrategy=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],n="",r=0,i=e.length;i>r;++r)n+=e.charAt(r),t.push(n);return t},e}();e.PrefixIndexStrategy=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(){}return e.prototype.prune=function(e){for(var t={},n=0,r=e.length;r>n;n++){var i=e[n];if(0===n)for(var a in i)t[a]=i[a];else for(var a in t)i[a]||delete t[a]}return t},e}();e.AllWordsMustMatchPruningStrategy=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(){}return e.prototype.prune=function(e){for(var t={},n=0,r=e.length;r>n;n++){var i=e[n];for(var a in i)t[a]=i[a]}return t},e}();e.AnyWordsThatMatchPruningStrategy=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.trim():""},e}();e.CaseSensitiveSanitizer=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.toLocaleLowerCase().trim():""},e}();e.LowerCaseSanitizer=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(){}return e.prototype.tokenize=function(e){return e.split(/[^a-zA-Z0-9\-']+/).filter(function(e){return!!e})},e}();e.SimpleTokenizer=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function t(t){this.uidFieldName_=t,this.indexStrategy_=new e.PrefixIndexStrategy,this.pruningStrategy=new e.AllWordsMustMatchPruningStrategy,this.sanitizer_=new e.LowerCaseSanitizer,this.tokenizer_=new e.SimpleTokenizer,this.documents_=[],this.searchableFieldsMap_={},this.searchIndex_={},this.tfIdfSearchIndex_={},this.tokenToIdfCache_={},this.enableTfIdf=!0}return Object.defineProperty(t.prototype,"enableTfIdf",{get:function(){return this.enableTfIdf_},set:function(e){if(this.initialized_)throw Error("TF-IDF cannot be enabled or disabled after initialization");this.enableTfIdf_=e,this.indexDocumentStrategy_=e?this.indexDocumentTfIdfEnabled_:this.indexDocumentTfIdfDisabled_,this.searchStrategy_=e?this.searchTfIdfEnabled_:this.searchTfIdfDisabled_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indexStrategy",{get:function(){return this.indexStrategy_},set:function(e){if(this.initialized_)throw Error("IIndexStrategy cannot be set after initialization");this.indexStrategy_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pruningStrategy",{get:function(){return this.pruningStrategy_},set:function(e){this.pruningStrategy_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sanitizer",{get:function(){return this.sanitizer_},set:function(e){if(this.initialized_)throw Error("ISanitizer cannot be set after initialization");this.sanitizer_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tokenizer",{get:function(){return this.tokenizer_},set:function(e){if(this.initialized_)throw Error("ITokenizer cannot be set after initialization");this.tokenizer_=e},enumerable:!0,configurable:!0}),t.prototype.addDocument=function(e){this.addDocuments([e])},t.prototype.addDocuments=function(e){this.documents_.push.apply(this.documents_,e),this.indexDocuments_(e,Object.keys(this.searchableFieldsMap_))},t.prototype.addIndex=function(e){this.searchableFieldsMap_[e]=!0,this.indexDocuments_(this.documents_,[e])},t.prototype.search=function(e){var t=this.tokenizer_.tokenize(this.sanitizer_.sanitize(e));return this.searchStrategy_(e,t)},t.prototype.calculateIdf_=function(e){if(!this.tokenToIdfCache_[e]){var t=0;this.tfIdfSearchIndex_[e]&&(t=this.tfIdfSearchIndex_[e].$documentsCount),this.tokenToIdfCache_[e]=1+Math.log(this.documents_.length/(1+t))}return this.tokenToIdfCache_[e]},t.prototype.calculateTfIdf_=function(e,t){for(var n=0,r=0,i=e.length;i>r;++r){var a=e[r],o=this.calculateIdf_(a);o=o===1/0?0:o;var s=0,h=t&&t[this.uidFieldName_];this.tfIdfSearchIndex_[a]&&this.tfIdfSearchIndex_[a].$uidToDocumentMap[h]&&(s=this.tfIdfSearchIndex_[a].$uidToDocumentMap[h].$tokenCount),n+=s*o}return n},t.prototype.indexDocumentTfIdfDisabled_=function(e,t,n){this.searchIndex_[e]||(this.searchIndex_[e]={}),this.searchIndex_[e][t]=n},t.prototype.indexDocumentTfIdfEnabled_=function(e,t,n){this.tfIdfSearchIndex_[e]?this.tfIdfSearchIndex_[e].$totalTokenCount++:this.tfIdfSearchIndex_[e]={$documentsCount:0,$totalTokenCount:1,$uidToDocumentMap:{}},this.tfIdfSearchIndex_[e].$uidToDocumentMap[t]?this.tfIdfSearchIndex_[e].$uidToDocumentMap[t].$tokenCount++:(this.tfIdfSearchIndex_[e].$documentsCount++,this.tfIdfSearchIndex_[e].$uidToDocumentMap[t]={$tokenCount:1,$document:n})},t.prototype.indexDocuments_=function(e,t){this.tokenToIdfCache_={},this.initialized_=!0;for(var n=0,r=e.length;r>n;n++)for(var i=e[n],a=i[this.uidFieldName_],o=0,s=t.length;s>o;o++){var h=t[o],c=i[h];if("string"==typeof c)for(var u=this.tokenizer_.tokenize(this.sanitizer_.sanitize(c)),f=0,d=u.length;d>f;f++)for(var l=u[f],p=this.indexStrategy_.expandToken(l),S=0,_=p.length;_>S;S++){var y=p[S];this.indexDocumentStrategy_(y,a,i)}}},t.prototype.searchTfIdfEnabled_=function(e,t){for(var n=[],r=0,i=t.length;i>r;r++){var a=t[r];n.push(this.tfIdfSearchIndex_[a]&&this.tfIdfSearchIndex_[a].$uidToDocumentMap||{})}var o=this.pruningStrategy_.prune(n),s=[];for(var h in o)s.push(o[h].$document);return s=s.sort(function(e,n){return this.calculateTfIdf_(t,n)-this.calculateTfIdf_(t,e)}.bind(this))},t.prototype.searchTfIdfDisabled_=function(e,t){for(var n=[],r=0,i=t.length;i>r;r++){var a=t[r];n.push(this.searchIndex_[a]||{})}var o=this.pruningStrategy_.prune(n),s=[];for(var h in o)s.push(o[h]);return s},t}();e.Search=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){e.StopWordsMap={a:"a",able:"able",about:"about",across:"across",after:"after",all:"all",almost:"almost",also:"also",am:"am",among:"among",an:"an",and:"and",any:"any",are:"are",as:"as",at:"at",be:"be",because:"because",been:"been",but:"but",by:"by",can:"can",cannot:"cannot",could:"could",dear:"dear",did:"did","do":"do",does:"does",either:"either","else":"else",ever:"ever",every:"every","for":"for",from:"from",get:"get",got:"got",had:"had",has:"has",have:"have",he:"he",her:"her",hers:"hers",him:"him",his:"his",how:"how",however:"however",i:"i","if":"if","in":"in",into:"into",is:"is",it:"it",its:"its",just:"just",least:"least",let:"let",like:"like",likely:"likely",may:"may",me:"me",might:"might",most:"most",must:"must",my:"my",neither:"neither",no:"no",nor:"nor",not:"not",of:"of",off:"off",often:"often",on:"on",only:"only",or:"or",other:"other",our:"our",own:"own",rather:"rather",said:"said",say:"say",says:"says",she:"she",should:"should",since:"since",so:"so",some:"some",than:"than",that:"that",the:"the",their:"their",them:"them",then:"then",there:"there",these:"these",they:"they","this":"this",tis:"tis",to:"to",too:"too",twas:"twas",us:"us",wants:"wants",was:"was",we:"we",were:"were",what:"what",when:"when",where:"where",which:"which","while":"while",who:"who",whom:"whom",why:"why",will:"will","with":"with",would:"would",yet:"yet",you:"you",your:"your"}}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function e(e,t){this.stemmingFunction_=e,this.tokenizer_=t}return e.prototype.tokenize=function(e){return this.tokenizer_.tokenize(e).map(function(e){return this.stemmingFunction_(e)},this)},e}();e.StemmingTokenizer=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function t(e){this.tokenizer_=e}return t.prototype.tokenize=function(t){return this.tokenizer_.tokenize(t).filter(function(t){return t&&e.StopWordsMap[t]!==t})},t}();e.StopWordsTokenizer=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){var t=function(){function t(t,n,r){this.indexStrategy_=t||new e.PrefixIndexStrategy,this.sanitizer_=n||new e.LowerCaseSanitizer,this.wrapperTagName_=r||"mark"}return t.prototype.highlight=function(e,t){for(var n=this.wrapText_("").length,r={},i=0,a=t.length;a>i;i++)for(var o=this.sanitizer_.sanitize(t[i]),s=this.indexStrategy_.expandToken(o),h=0,c=s.length;c>h;h++){var u=s[h];r[u]?r[u].push(o):r[u]=[o]}for(var f="",d="",l=0,i=0,p=e.length;p>i;i++){var S=e.charAt(i);" "===S?(f="",d="",l=i+1):(f+=S,d+=this.sanitizer_.sanitize(S)),r[d]&&r[d].indexOf(d)>=0&&(f=this.wrapText_(f),e=e.substring(0,l)+f+e.substring(i+1),i+=n,p+=n)}return e},t.prototype.wrapText_=function(e){return"<"+this.wrapperTagName_+">"+e+"</"+this.wrapperTagName_+">"},t}();e.TokenHighlighter=t}(JsSearch||(JsSearch={}));var JsSearch;!function(e){}(JsSearch||(JsSearch={}));